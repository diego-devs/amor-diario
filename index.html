<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Amor Diario</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400;1,600&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
  --bg:#1a1215;--bg2:#231a1e;--bg3:#2d2226;
  --cream:#f0e6d3;--gold:#c9a96e;--gold-dim:#a88a55;
  --rose:#c27070;--rose-soft:#b5616180;--coral:#d4856a;
  --text:#ddd0c0;--text-dim:#a0918a;
}
html{scroll-behavior:smooth}
body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);font-weight:300;line-height:1.7;min-height:100vh}
a{color:var(--gold);text-decoration:none;transition:color .2s}
a:hover{color:var(--coral)}

/* Header */
.header{text-align:center;padding:3rem 1.5rem 2rem;border-bottom:1px solid var(--bg3)}
.header h1{font-family:'Cormorant Garamond',serif;font-size:clamp(2.2rem,6vw,3.8rem);font-weight:600;color:var(--cream);letter-spacing:.02em}
.header .heart{color:var(--rose);opacity:.7;font-size:.8em}
.header p{color:var(--text-dim);font-size:.95rem;margin-top:.4rem;font-style:italic}
.header .counter{color:var(--text-dim);font-size:.85rem;margin-top:.2rem}

/* Nav */
.nav{display:flex;justify-content:center;gap:.5rem;padding:1.2rem 1rem;flex-wrap:wrap;position:sticky;top:0;background:var(--bg);z-index:100;border-bottom:1px solid var(--bg3)}
.nav button{background:var(--bg2);color:var(--text-dim);border:1px solid var(--bg3);padding:.45rem 1.1rem;border-radius:2rem;font-size:.85rem;cursor:pointer;font-family:'Inter',sans-serif;transition:all .25s}
.nav button:hover,.nav button.active{background:var(--rose-soft);color:var(--cream);border-color:var(--rose)}

/* Search */
.search-wrap{max-width:480px;margin:1.5rem auto;padding:0 1.5rem}
.search-wrap input{width:100%;padding:.7rem 1.2rem;background:var(--bg2);border:1px solid var(--bg3);border-radius:2rem;color:var(--cream);font-size:.9rem;font-family:'Inter',sans-serif;outline:none;transition:border-color .2s}
.search-wrap input::placeholder{color:var(--text-dim)}
.search-wrap input:focus{border-color:var(--gold-dim)}

/* Articles */
.articles{max-width:720px;margin:0 auto;padding:1rem 1.5rem 1rem}
.articles-count{font-size:.8rem;color:var(--text-dim);margin-bottom:1rem;padding-left:.25rem}
.article{background:var(--bg2);border:1px solid var(--bg3);border-radius:12px;margin-bottom:1.2rem;overflow:hidden;cursor:pointer;transition:transform .2s,border-color .3s;opacity:0;transform:translateY(18px);animation:fadeUp .5s ease forwards}
.article:hover{border-color:var(--rose-soft);transform:translateY(-2px)}
@keyframes fadeUp{to{opacity:1;transform:translateY(0)}}
.article-head{padding:1.4rem 1.6rem}
.article-date{font-size:.78rem;color:var(--gold-dim);text-transform:uppercase;letter-spacing:.08em;margin-bottom:.5rem}
.article-quote{font-family:'Cormorant Garamond',serif;font-size:1.35rem;font-weight:400;font-style:italic;color:var(--cream);line-height:1.5;margin-bottom:.4rem}
.article-author{font-size:.85rem;color:var(--rose);font-weight:400}
.article-body{max-height:0;overflow:hidden;transition:max-height .5s ease,padding .3s ease;padding:0 1.6rem}
.article.open .article-body{max-height:2000px;padding:0 1.6rem 1.6rem}
.article-title{font-family:'Cormorant Garamond',serif;font-size:1.1rem;font-weight:600;color:var(--gold);margin-bottom:.8rem}
.article-reflection{color:var(--text);font-size:.92rem;line-height:1.8;white-space:pre-line}
.article-song{margin-top:1.2rem;padding:1rem;background:var(--bg);border-radius:8px;border-left:3px solid var(--rose)}
.article-song .song-title{font-weight:500;color:var(--cream);font-size:.95rem}
.article-song .song-artist{color:var(--text-dim);font-size:.85rem;margin-bottom:.3rem}
.article-song .song-reason{color:var(--text-dim);font-size:.82rem;font-style:italic;margin-bottom:.5rem}
.article-song .song-links{display:flex;gap:.8rem}
.article-song .song-links a{font-size:.82rem;font-weight:500;padding:.3rem .7rem;border-radius:4px;border:1px solid var(--bg3);transition:all .2s}
.article-song .song-links a:hover{border-color:var(--gold)}
.article-tags{margin-top:.8rem;display:flex;flex-wrap:wrap;gap:.4rem}
.tag{font-size:.72rem;padding:.2rem .6rem;background:var(--bg);border-radius:1rem;color:var(--text-dim);border:1px solid var(--bg3)}
.expand-hint{font-size:.75rem;color:var(--text-dim);margin-top:.3rem}

/* Pagination */
.pagination{display:flex;justify-content:center;align-items:center;gap:.4rem;padding:1rem 1.5rem 2rem;max-width:720px;margin:0 auto}
.page-btn{font-family:'Inter',sans-serif;font-size:.85rem;font-weight:500;width:36px;height:36px;display:flex;align-items:center;justify-content:center;background:var(--bg2);color:var(--text-dim);border:1px solid var(--bg3);border-radius:8px;cursor:pointer;transition:all .25s}
.page-btn:hover:not(.disabled):not(.active){border-color:var(--rose);color:var(--cream)}
.page-btn.active{background:var(--rose);color:var(--cream);border-color:var(--rose)}
.page-btn.disabled{opacity:.3;cursor:not-allowed}
.page-dots{color:var(--text-dim);font-size:.85rem;padding:0 .25rem}

/* Subscribe */
.subscribe{max-width:720px;margin:0 auto 2rem;padding:0 1.5rem}
.subscribe-inner{text-align:center;padding:2.5rem 2rem;background:var(--bg2);border:1px solid var(--bg3);border-radius:12px}
.subscribe-label{font-size:.7rem;font-weight:500;letter-spacing:.25em;text-transform:uppercase;color:var(--rose);margin-bottom:.75rem}
.subscribe-title{font-family:'Cormorant Garamond',serif;font-size:1.5rem;font-weight:400;color:var(--cream);margin-bottom:.5rem}
.subscribe-desc{font-size:.88rem;color:var(--text-dim);margin-bottom:1.5rem;max-width:400px;margin-left:auto;margin-right:auto}
.subscribe-btn{display:inline-block;padding:.8rem 2.2rem;background:var(--rose);color:var(--cream);text-decoration:none;border-radius:2rem;font-family:'Inter',sans-serif;font-size:.88rem;font-weight:600;transition:all .25s;margin-bottom:.75rem;border:none;cursor:pointer}
.subscribe-btn:hover{background:var(--coral);color:var(--cream);transform:translateY(-1px)}
.subscribe-copy-btn{display:inline-block;padding:.6rem 1.5rem;background:transparent;color:var(--rose);border:1px solid var(--rose-soft);border-radius:2rem;font-family:'Inter',sans-serif;font-size:.82rem;font-weight:500;cursor:pointer;transition:all .25s;margin-left:.5rem;margin-bottom:1rem}
.subscribe-copy-btn:hover{background:var(--rose-soft);border-color:var(--rose)}
.subscribe-note{font-size:.75rem;color:var(--text-dim);max-width:450px;margin:0 auto}
.subscribe-note strong{color:var(--text)}

/* Footer */
.footer{text-align:center;padding:2rem 1.5rem;border-top:1px solid var(--bg3);color:var(--text-dim);font-size:.75rem}
.footer .footer-quote{font-family:'Cormorant Garamond',serif;font-style:italic;font-size:.9rem;color:var(--text);margin-bottom:.75rem;max-width:500px;margin-left:auto;margin-right:auto}

/* Scroll top */
.scroll-top{position:fixed;bottom:2rem;right:2rem;width:44px;height:44px;border-radius:50%;background:var(--bg2);border:1px solid var(--bg3);color:var(--gold);font-size:1.2rem;cursor:pointer;opacity:0;pointer-events:none;transition:all .3s;display:flex;align-items:center;justify-content:center;z-index:200}
.scroll-top.show{opacity:1;pointer-events:auto}
.scroll-top:hover{background:var(--rose-soft);border-color:var(--rose)}

/* Empty */
.empty{text-align:center;padding:3rem;color:var(--text-dim);font-style:italic}

/* Responsive */
@media(max-width:480px){
  .article-head{padding:1.1rem 1.2rem}
  .article-quote{font-size:1.15rem}
  .article.open .article-body{padding:0 1.2rem 1.2rem}
}
</style>
</head>
<body>

<header class="header">
  <h1>Amor Diario <span class="heart">â™¡</span></h1>
  <p>Reflexiones diarias sobre el amor</p>
  <div class="counter" id="counter"></div>
</header>

<nav class="nav" id="nav"></nav>

<div class="search-wrap">
  <input type="text" id="search" placeholder="Buscar por cita, autor, reflexiÃ³n...">
</div>

<main class="articles" id="articles">
  <p class="articles-count" id="articlesCount"></p>
  <div id="articlesList"></div>
</main>

<div class="pagination" id="pagination"></div>

<!-- Subscribe -->
<section class="subscribe" id="subscribe">
  <div class="subscribe-inner">
    <p class="subscribe-label">Newsletter</p>
    <h2 class="subscribe-title">Recibe la reflexiÃ³n de amor en tu correo</h2>
    <p class="subscribe-desc">Cada maÃ±ana, una reflexiÃ³n sobre el amor directo a tu bandeja. Sin spam, solo palabras que importan.</p>
    <a href="mailto:david.asistente.ai@gmail.com?subject=SUSCRIBIR%20AMOR&body=Quiero%20recibir%20la%20reflexi%C3%B3n%20de%20amor%20diaria." class="subscribe-btn">
      ðŸ’Œ Suscribirme por correo
    </a>
    <button class="subscribe-copy-btn" onclick="copyEmail(this)">ðŸ“‹ Copiar correo</button>
    <p class="subscribe-note">EnvÃ­a un correo con asunto <strong>"SUSCRIBIR AMOR"</strong> a <strong>david.asistente.ai@gmail.com</strong> y recibirÃ¡s la reflexiÃ³n cada maÃ±ana. Para cancelar, envÃ­a <strong>"CANCELAR AMOR"</strong>.</p>
  </div>
</section>

<footer class="footer">
  <p class="footer-quote">Â«El amor no se mira a sÃ­ mismo, no busca lo suyo.Â» â€” 1 Corintios 13:5</p>
  <p>Amor Diario â€” Reflexiones sobre lo que mÃ¡s importa</p>
</footer>

<button class="scroll-top" id="scrollTop" aria-label="Volver arriba">â†‘</button>

<script>
let allArticles=[];
let currentPage=1;
const PER_PAGE=10;
let activeFilter='all';

const months={1:'Enero',2:'Febrero',3:'Marzo',4:'Abril',5:'Mayo',6:'Junio',7:'Julio',8:'Agosto',9:'Septiembre',10:'Octubre',11:'Noviembre',12:'Diciembre'};

async function init(){
  const res=await fetch('articles/index.json');
  const index=await res.json();
  const loaded=await Promise.all(index.map(async e=>{
    const r=await fetch('articles/'+e.file);
    return r.json();
  }));
  allArticles=loaded.sort((a,b)=>b.date.localeCompare(a.date));
  document.getElementById('counter').textContent=allArticles.length+' dÃ­as de reflexiones sobre el amor';
  buildNav();
  renderCurrentView();
}

function buildNav(){
  const nav=document.getElementById('nav');
  const ms=[...new Set(allArticles.map(a=>a.month))].sort((a,b)=>a-b);
  const btnAll=mk('button','Todos');
  btnAll.classList.add('active');
  btnAll.onclick=()=>{activeFilter='all';currentPage=1;setActive(btnAll);renderCurrentView()};
  nav.appendChild(btnAll);
  for(const m of ms){
    const btn=mk('button',months[m]);
    btn.onclick=()=>{activeFilter=m;currentPage=1;setActive(btn);renderCurrentView()};
    nav.appendChild(btn);
  }
}

function getFiltered(){
  return activeFilter==='all'?allArticles:allArticles.filter(a=>a.month===activeFilter);
}

function renderCurrentView(){
  const filtered=getFiltered();
  const totalPages=Math.ceil(filtered.length/PER_PAGE);
  const start=(currentPage-1)*PER_PAGE;
  const page=filtered.slice(start,start+PER_PAGE);
  document.getElementById('articlesCount').textContent=filtered.length+' reflexion'+(filtered.length!==1?'es':'');
  render(page);
  renderPagination(totalPages);
}

function goToPage(p){
  const filtered=getFiltered();
  const totalPages=Math.ceil(filtered.length/PER_PAGE);
  if(p<1||p>totalPages)return;
  currentPage=p;
  renderCurrentView();
  document.querySelector('.nav').scrollIntoView({behavior:'smooth'});
}

function setActive(btn){document.querySelectorAll('.nav button').forEach(b=>b.classList.remove('active'));btn.classList.add('active')}

function mk(tag,text){const e=document.createElement(tag);if(text)e.textContent=text;return e}

function fmtDate(d){const dt=new Date(d+'T12:00:00');return dt.toLocaleDateString('es-ES',{weekday:'long',year:'numeric',month:'long',day:'numeric'})}

function render(arts){
  const c=document.getElementById('articlesList');
  c.innerHTML='';
  if(!arts.length){c.innerHTML='<div class="empty">No se encontraron artÃ­culos.</div>';return}
  arts.forEach((a,i)=>{
    const el=document.createElement('article');
    el.className='article';
    el.style.animationDelay=Math.min(i*60,600)+'ms';
    el.innerHTML=`
      <div class="article-head">
        <div class="article-date">${fmtDate(a.date)}</div>
        <div class="article-quote">"${esc(a.quote)}"</div>
        <div class="article-author">â€” ${esc(a.author)}</div>
        <div class="expand-hint">Toca para leer mÃ¡s</div>
      </div>
      <div class="article-body">
        <div class="article-title">${esc(a.title)}</div>
        <div class="article-reflection">${esc(a.reflection)}</div>
        <div class="article-song">
          <div class="song-title">â™« ${esc(a.song.title)}</div>
          <div class="song-artist">${esc(a.song.artist)}</div>
          <div class="song-reason">${esc(a.song.reason)}</div>
          <div class="song-links">
            <a href="${a.song.spotifyUrl}" target="_blank" rel="noopener">Spotify</a>
            <a href="${a.song.youtubeUrl}" target="_blank" rel="noopener">YouTube</a>
          </div>
        </div>
        ${a.tags?`<div class="article-tags">${a.tags.map(t=>`<span class="tag">${esc(t)}</span>`).join('')}</div>`:''}
      </div>`;
    el.querySelector('.article-head').addEventListener('click',()=>el.classList.toggle('open'));
    c.appendChild(el);
  });
}

function esc(s){const d=document.createElement('div');d.textContent=s;return d.innerHTML}

function renderPagination(totalPages){
  const c=document.getElementById('pagination');
  if(totalPages<=1){c.innerHTML='';return}
  let h='';
  h+=`<button class="page-btn ${currentPage===1?'disabled':''}" onclick="goToPage(${currentPage-1})" ${currentPage===1?'disabled':''}>â€¹</button>`;
  for(let i=1;i<=totalPages;i++){
    if(totalPages>7&&i>2&&i<totalPages-1&&Math.abs(i-currentPage)>1){
      if(i===3||i===totalPages-2)h+=`<span class="page-dots">â€¦</span>`;
      continue;
    }
    h+=`<button class="page-btn ${i===currentPage?'active':''}" onclick="goToPage(${i})">${i}</button>`;
  }
  h+=`<button class="page-btn ${currentPage===totalPages?'disabled':''}" onclick="goToPage(${currentPage+1})" ${currentPage===totalPages?'disabled':''}>â€º</button>`;
  c.innerHTML=h;
}

/* Search */
document.getElementById('search').addEventListener('input',function(){
  const q=this.value.toLowerCase().trim();
  if(!q){activeFilter='all';currentPage=1;renderCurrentView();return}
  const matches=allArticles.filter(a=>
    a.quote.toLowerCase().includes(q)||
    a.author.toLowerCase().includes(q)||
    a.reflection.toLowerCase().includes(q)||
    a.title.toLowerCase().includes(q)||
    (a.tags||[]).some(t=>t.toLowerCase().includes(q))
  );
  document.getElementById('articlesCount').textContent=matches.length+' resultado'+(matches.length!==1?'s':'');
  render(matches);
  document.getElementById('pagination').innerHTML='';
});

/* Copy email */
function copyEmail(btn){
  navigator.clipboard.writeText('david.asistente.ai@gmail.com').then(()=>{
    const orig=btn.textContent;
    btn.textContent='âœ… Â¡Copiado!';
    setTimeout(()=>{btn.textContent=orig},2000);
  });
}

/* Scroll top */
const stBtn=document.getElementById('scrollTop');
window.addEventListener('scroll',()=>stBtn.classList.toggle('show',window.scrollY>400));
stBtn.addEventListener('click',()=>window.scrollTo({top:0,behavior:'smooth'}));

init();
</script>
</body>
</html>
